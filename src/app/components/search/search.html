<div class="container">
  <h2 class="mb-5 mt-2">Catálogo</h2>
  <form class="row mb-5">
    <div class="col">
      <input [(ngModel)]="title" name="title" class="form-control" placeholder="Título">
    </div>
    <div class="col">
      <input [(ngModel)]="author" name="author" class="form-control" placeholder="Autor">
    </div>
    <div class="col">
      <input [(ngModel)]="year" name="year" class="form-control" placeholder="Año">
    </div>
    <div class="col">
      <select [(ngModel)]="category" name="category" class="form-select">
        <option value="">Todas las categorías</option>
        <option *ngFor="let c of categories" [value]="c">{{ c }}</option>
      </select>
    </div>
    <div class="col">
      <button class="btn btn-primary" (click)="searchBooks()">Buscar</button>
    </div>
  </form>
  <div *ngIf="books.length > 0">
    <div class="row g-4">
      <div class="col-sm-6 col-md-3" *ngFor="let book of books">
          <div class="card mb-4 h-100 shadow-sm book-card">
            <div class="ratio ratio-3x4" (click)="viewBookDetails(book.id)" style="cursor: pointer;">
              <img [src]="book.image" class="card-img-top object-fit-cover" alt="{{book.title}}" [title]="book.image">
            </div>
            <div class="card-body d-flex flex-column">
              <div (click)="viewBookDetails(book.id)" style="cursor: pointer;">
                <h6 class="card-title">{{book.title}}</h6>
                <p class="card-text text-muted mb-1">{{book.author}}</p>
                <p class="card-text small text-secondary">{{book.year}} • {{book.category}}</p>
              </div>
              <div class="mt-auto d-flex justify-content-between align-items-center">
                <strong class="text-primary">{{ book.price ? (book.price + ' €') : '' }}</strong>
                <button class="btn btn-sm btn-success" (click)="addToCart(book); $event.stopPropagation()">Añadir</button>
              </div>
            </div>
          </div>
        </div>
    </div>
  </div>
</div>
